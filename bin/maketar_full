#!/bin/csh -f
# HIBRIDON bin/maketar_full $Revision: 2011.2 $ --- make hibridon tar file
# maketar 
# this creates a full tar for mha's use including html files!
# the PATH variable should be set to include the hibridon bin directory

set basedir=`hibriddir`
alias rm 'rm -f'
@ items = $#argv
if ($items > 0) then
  echo "usage: maketar_full"
  goto end
endif
set htmloption = true
set htar=/Users/mha/scratch/htar
cd $basedir
if (-e $basedir/tar_full.log) then
  rm $basedir/tar_full.log
endif
cd ..
if (-e $htar) then
 cd $htar
 rm -r ./*
else
  mkdir $htar
  cd $htar
endif
echo ""
echo "copying all files to $htar ..."
echo "copying all files to $htar ..." >>& $basedir/tar_full.log
cp -pr $basedir/* . >>& $basedir/tar_full.log


echo ""
echo "removing executables ..."
echo "removing executables ..." >>& $basedir/tar_full.log
rm -r $htar/nohe  >>& $basedir/tar_full.log
rm -r $htar/phhe  >>& $basedir/tar_full.log
rm -r $htar/bin/progs/hib* >>& $basedir/tar_full.log
rm -r $htar/bin/progs/runpot* >>& $basedir/tar_full.log
rm -r $htar/bin/progs/Outpt* >>& $basedir/tar_full.log
rm -r $htar/bin/progs/Job* >>& $basedir/tar_full.log
rm -r $htar/bin/progs/temp* >>& $basedir/tar_full.log
rm -r $htar/bin/progs/*.smt >>& $basedir/tar_full.log
rm -r $htar/bin/progs/*.evl >>& $basedir/tar_full.log
rm -r $htar/bin/progs/*.sav >>& $basedir/tar_full.log
rm -r $htar/bin/progs/*.dat >>& $basedir/tar_full.log
rm -r $htar/bin/progs/*.wfu >>& $basedir/tar_full.log
rm -r $htar/bin/progs/*.log* >>& $basedir/tar_full.log
rm -r $htar/bin/progs/*.f >>& $basedir/tar_full.log
rm -r $htar/bin/*.exe >>& $basedir/tar.log
rm  $htar/bin/hib_help* >>& $basedir/tar_full.log
rm  $htar/src/*.sav >>& $basedir/tar_full.log
rm  $htar/src/hib_* >>& $basedir/tar_full.log
rm  $htar/src/Outpt >>& $basedir/tar_full.log
rm  $htar/bin/*.log >>& $basedir/tar_full.log
rm  $htar/*.log >>& $basedir/tar_full.log
rm -r $htar/bin/comsplit.exe  >>& $basedir/tar_full.log
echo ""
echo "removing compiled object files ..."
echo "removing compiled object files ..." >>& $basedir/tar_full.log
rm $htar/src/*.o
rm $htar/src/pot/*.o
rm $htar/utilities/*.o
echo ""
echo "tar'ing common files ..."
cd $htar/src
cd common
rm  *.~* >>& $basedir/tar_full.log
cd ..
cat common/* > hicommon.all
tar -cf hicommon.tar common
echo ""
echo "removing common directories ..."
echo "removing common directories ..." >>& $basedir/tar.log
rm -r $htar/src/common >>& $basedir/tar.log
rm -r $htar/src/pot/common >>& $basedir/tar.log
echo ""
echo "removing other local files ..."
echo "removing other local files ..." >>& $basedir/tar_full.log
cd $htar
rm $htar/bin/*.log.* >>& $basedir/tar_full.log
rm $htar/bin/test* >>& $basedir/tar_full.log
rm $htar/bin/*.BAK >>& $basedir/tar_full.log
rm $htar/*.BAK >>& $basedir/tar_full.log
rm $htar/tests/*.out >>& $basedir/tar_full.log
rm $htar/tests/*.sav >>& $basedir/tar_full.log
rm $htar/tests/Outpt* >>& $basedir/tar_full.log
rm $htar/tests/J* >>& $basedir/tar_full.log
rm $htar/tests/*.smt >>& $basedir/tar_full.log
rm $htar/src/A* >>& $basedir/tar_full.log
rm $htar/src/J* >>& $basedir/tar_full.log
rm $htar/src/O* >>& $basedir/tar_full.log
rm $htar/doc/hibrid.hlp.old >>& $basedir/tar_full.log
rm -r $htar/testnew >>& $basedir/tar_full.log
rm  $htar/hibrid*.Z >>& $basedir/tar_full.log
rm  $htar/hibrid*.uu >>& $basedir/tar_full.log
rm $htar/patch*.tar.Z.uu >>& $basedir/tar_full.log
#rm -r $htar/patch* >>& $basedir/tar_full.log

echo ""
echo "creating tar file ..."
echo "creating tar file ..." >>& $basedir/tar_full.log
if (-e hibrid_full.tar.Z) then
  rm hibrid_full.tar.Z
endif
tar -cvf hibrid_full.tar * >>& $basedir/tar_full.log

#$exit

echo ""
echo "gzip'ing tar file ..."
echo "gzip'ing tar file ..." >>& $basedir/tar.log
gzip hibrid_full.tar >>& $basedir/tar.log

echo "$htar/hibrid_full.tar.gz created, see $basedir/tar_full.log for diagnostics"

echo ""
exit
