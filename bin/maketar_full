#!/bin/csh -f
# HIBRIDON bin/maketar $Revision: 2000.1 $ --- make hibridon tar file
# this creates a full tar for mha's use only (no html files!)
# the PATH variable should be set to include the hibridon bin directory

set basedir=`hibriddir`
set htar=/scratch/mha/htar
cd $basedir
if (-e $basedir/tar_full.log) then
  rm $basedir/tar_full.log
endif
cd ..
if (-e $htar) then
 cd $htar
 rm -r ./*
else
  mkdir $htar
  cd $htar
endif
echo ""
echo "copying all files to $htar ..."
echo "copying all files to $htar ..." >>& $basedir/tar_full.log
cp -pr $basedir/* . >>& $basedir/tar_full.log

#echo ""
#echo "getting .html files from mha-mac1 ..."
#echo "getting .html files from mha-mac1 ..." >>& $basedir/tar_full.log
#cd doc
#rcp -rp mha-mac1.umd.edu:/users3/mha/public_html/hibridon hib_html


echo ""
echo "removing executables ..."
echo "removing executables ..." >>& $basedir/tar_full.log
rm -r $htar/nohe  >>& $basedir/tar_full.log
rm -r $htar/phhe  >>& $basedir/tar_full.log
rm -r $htar/bin/progs/* >>& $basedir/tar_full.log
rm  $htar/bin/hib_help* >>& $basedir/tar_full.log
rm  $htar/src/*.sav >>& $basedir/tar_full.log
rm  $htar/src/hib_* >>& $basedir/tar_full.log
rm  $htar/src/Outpt >>& $basedir/tar_full.log
rm  $htar/bin/*.log >>& $basedir/tar_full.log
rm  $htar/*.log >>& $basedir/tar_full.log
rm -r $htar/bin/comsplit.exe  >>& $basedir/tar_full.log
echo ""
echo "removing previous version files ..."
echo "removing previous version files ..." >>& $basedir/tar_full.log
rm -r  $htar/*.~* >>& $basedir/tar_full.log
rm  $htar/*.~* >>& $basedir/tar_full.log
rm  $htar/bin/*.~* >>& $basedir/tar_full.log
rm  $htar/src/*.~* >>& $basedir/tar_full.log
rm  $htar/src/pot/*.~* >>& $basedir/tar_full.log
rm  $htar/doc/*.~* >>& $basedir/tar_full.log
rm  $htar/utilities/*.~* >>& $basedir/tar_full.log
echo ""
echo "removing compiled object files ..."
echo "removing compiled object files ..." >>& $basedir/tar_full.log
rm $htar/src/*.o
rm $htar/src/pot/*.o
rm $htar/utilities/*.o

echo ""
echo "removing common files ..."
echo "removing common files ..." >>& $basedir/tar.log
rm -r $htar/src/common >>& $basedir/tar.log
rm -r $htar/src/pot/common >>& $basedir/tar.log
echo ""
echo "removing other local files ..."
echo "removing other local files ..." >>& $basedir/tar_full.log
cd $htar
rm $htar/bin/*.log.* >>& $basedir/tar_full.log
rm $htar/bin/test* >>& $basedir/tar_full.log
rm $htar/bin/*.BAK >>& $basedir/tar_full.log
rm $htar/tests/*.out >>& $basedir/tar_full.log
rm $htar/tests/*.sav >>& $basedir/tar_full.log
rm $htar/tests/Outpt* >>& $basedir/tar_full.log
rm $htar/tests/J* >>& $basedir/tar_full.log
rm $htar/tests/*.smt >>& $basedir/tar_full.log
rm $htar/src/A* >>& $basedir/tar_full.log
rm $htar/src/J* >>& $basedir/tar_full.log
rm $htar/src/O* >>& $basedir/tar_full.log
rm $htar/doc/hibrid.hlp.old >>& $basedir/tar_full.log
rm -r $htar/testnew >>& $basedir/tar_full.log
rm  $htar/hibrid*.Z >>& $basedir/tar_full.log
rm  $htar/hibrid*.uu >>& $basedir/tar_full.log
rm $htar/patch*.tar.Z.uu >>& $basedir/tar_full.log
#rm -r $htar/patch* >>& $basedir/tar_full.log

echo ""
echo "creating tar file ..."
echo "creating tar file ..." >>& $basedir/tar_full.log
if (-e hibrid_full.tar.Z) then
  rm hibrid_full.tar.Z
endif
tar -cvf hibrid_full.tar * >>& $basedir/tar_full.log

#$exit

echo ""
echo "compressing tar file ..."
echo "compressing tar file ..." >>& $basedir/tar_full.log
compress hibrid_full.tar >>& $basedir/tar_full.log



echo ""
echo "$htar/hibrid_full.tar.Z created, see $basedir/tar_full.log for diagnostics"
echo "putting hibrid_full.tar.Z file on mha-ibm2 ..."

rcp -p hibrid_full.tar.Z mha-ibm2.umd.edu:/home/mha

#rm hibrid_full.tar.Z
#cd 
#rm -r $htar
echo ""
exit
